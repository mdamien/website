
///// Global 
.elements-associes-block, .personnes-associees-block, .fichiers-associes-block{

	padding-top: $sticky-height + $baseline*2;

	& > h1{
		margin-bottom: $baseline*2;
	}
	
	& > p{
		@include font-size-13;
		color: $text-color-light;
		display: none;
	}
    &:first-of-type{
    	margin-top: 10vh;
    }	

	// Grey Background
	&::before {  
	    content: "";
		position: absolute;
		width: 100vw;
		
	    background-color: $background-grey;
	    z-index: -1;

	}

	///////////////
	// Common ////
	/////////////

	ul.liste_objet{ 

		// background-color: red;

		li.item{
			box-sizing: border-box;
			
			padding-bottom: $baseline/2;
			// margin-right: $unite*3;
			border-bottom: $border-light;
			overflow: hidden;
			background: $background-grey;
			//z-index: 2;
			opacity: 1;
			cursor: pointer;
			

			// Hover !
			.accroche {
				display: block;
				//background: #fcf0ff;
				//transition-delay: .25s;
				-webkit-transition: .25s cubic-bezier(.86,0,.07,1); 
				-moz-transition: .25s cubic-bezier(.86,0,.07,1); 
				-ms-transition: .25s cubic-bezier(.86,0,.07,1); 
				-o-transition: .25s cubic-bezier(.86,0,.07,1); 
				transition: .25s cubic-bezier(.86,0,.07,1);
			}

			.complement{
				position: absolute;

				top: 0;
				opacity: 0;
				width: 100%;
				//background: yellow;
				-webkit-transition: .25s cubic-bezier(.86,0,.07,1); 
				-moz-transition: .25s cubic-bezier(.86,0,.07,1); 
				-ms-transition: .25s cubic-bezier(.86,0,.07,1); 
				-o-transition: .25s cubic-bezier(.86,0,.07,1); 
				transition: .25s cubic-bezier(.86,0,.07,1); 

				// Prevent overflow - Not perfect besause hide content by default after line 3
				overflow: hidden;
    			max-height: 103px;
					
				h2{
					@include font-size-20;
					word-break: break-word;
					border: none;
					padding: 15px 25px 15px 0;
				}
			}

			&:hover {

				//z-index: 1;

				.accroche, .complement{ 
					-webkit-transition: .25s cubic-bezier(.86,0,.07,1); 
					-moz-transition: .25s cubic-bezier(.86,0,.07,1); 
					-ms-transition: .25s cubic-bezier(.86,0,.07,1); 
					-o-transition: .25s cubic-bezier(.86,0,.07,1); 
					transition: .25s cubic-bezier(.86,0,.07,1); 


				}
				 				
				.accroche {
										
					opacity: 0;
					color: red;
					-webkit-transform: translateY(100%); 
					-moz-transform: translateY(100%); 
					-ms-transform: translateY(100%); 
					-o-transform: translateY(100%); 
					transform: translateY(100%);
				}

				.complement{ 
					opacity: 1;
				}
			}



			a{

				// *{ @include text-overflow(); }

				h1{
					@include font-size-20();
					padding-top: $baseline*1.5;
					padding-bottom: $baseline*1.5;
					border-bottom: $border-very-light;
					padding-right: $unite;
				}			

			
				h2{ 
					border-bottom: $border-very-light;
					padding-top: $baseline*0.5;
					padding-bottom: $baseline*0.5;
					color: $text-color-light; 
					@include font-size-13();
				}

				.type, .period, .date-news{ 
					@include font-size-13();
					color: $text-color-light; 
					padding-top: $baseline*0.5;
					display: inline-block;
					

				}

				.period, .date-news{ width: 50%}

				.type{
					text-align: right;
					width: 100%;
					right: 0;
				}

				.period + .type, .date-news + .type{  width: 50%;}

				.image-pre{
					display: none;
				}

				.embleme{
					font-size:40px;
					width: 25px;
					order:1;

					display: none;
				}
				
				.type::before{
					content: inherit;
				}
			}
		}
	}
}

.personnes-associees-block{
	.liste_personne{

		@include flex;
		@include flex-direction(row);
		@include flex-wrap(wrap);
		@include justify-content

		[data-type="people"]{
			
			//flex: 0 0 25%;
			//max-width: calc( 25% - #{$unite*2} );
			margin: 0 $unite 0 0 ;
			width: 150px;
			
			figure{ 
				filter: grayscale(1) contrast(1.25);
				mix-blend-mode: multiply;
				overflow: hidden;
				margin-bottom: $baseline;
				max-width: 100%;

				img{width: 33vh; transform: translateX(-50%); left: 50%; }
			}

			h2{
				@include font-size-20();
			}

			h3{
				@include font-size-13();
				color: $text-color-light; 

			}
		}

	}
}

.fichiers-associes-block{
    .icon{
    border: $border;
    font-size: 30px;
    letter-spacing: -4px;
    left: 0px;
    overflow: hidden;
    line-height: 20px;

        span{

            &:first-of-type{
                position: absolute;
                width: 100px;
                height: 100px;
                left: 60%;
                top: -50px;
                float: right;
                border: $border;
                background: white;
                transform: rotate(-45deg);            
            }
            &:last-of-type{
                bottom: 2px;
                right: 9px;
                font-size: 15px;
                letter-spacing: 0px;
            }
        }
    }

    li.item{ border-bottom: none !important;}
}



///// Responsive

@include for-size(phone) {
	.elements-associes-block, .personnes-associees-block, .fichiers-associes-block{

		&::before { 
		    height: calc(100% + 50px);
		    min-height: 200px;
		    top: 50px;
		    left: $margins-phone*-1;

		}
	    &:last-of-type::before{
	    	height: calc(100% + 20px);
	    }
	}
	.elements-associes-block > h1{ 
		@include font-size-16-phone();
		font-weight: 600;
		span{ font-weight: 300;}
	}
	.elements-associes-block .liste_objet{
		h1{ @include font-size-20-phone(); }				
		h2{ @include font-size-13-phone(); }
		.type{ @include font-size-13-phone(); }
	}
	.fichiers-associes-block{
        li.item{ 
            @include font-size-20();
            margin-bottom: $margins-desktop;
            @include text-overflow();
            svg, p{ 
                display: inline-block;
                vertical-align: middle;
            }
            p.name{ 
                margin-left: $margins-desktop;
                @include font-size-20();
            }
            svg{ 
                width: 50px;
            }
        }       
    } 
}

@include for-size(desktop) {
	.elements-associes-block, .personnes-associees-block, .fichiers-associes-block{

		&::before { 
		    height: calc(100% + 50px);
		    min-height: 200px;
		    top: 50px;
		    left: calc(#{$logo-column*-1} - #{$margins-desktop*1});

		}
	    &:last-of-type::before{
	    	height: calc(100% + 40vh - #{$unite*2});
	    }
	}

	.elements-associes-block > h1,
	.personnes-associees-block > h1,
	.fichiers-associes-block > h1{ 
		@include font-size-20();
		font-weight: 600;
		span{ font-weight: 300;}
	}

	.elements-associes-block .liste_objet{
		h1{ @include font-size-20(); }				
		h2{ @include font-size-13(); }
		.type{ @include font-size-13(); }
	}

	.fichiers-associes-block{
        li{ 
            @include font-size-20();
            margin-bottom: $margins-desktop;
            svg, p{ 
                display: inline-block;
                vertical-align: middle;
            }
            p.name{ 
                margin-left: $margins-desktop;
                @include font-size-20();
            }
            svg{ 
                width: 50px;
            }
        }       
    }
}

@media screen and (max-width: 1000px){
	.elements-associes-block{

		ul.liste_objet{ 
			// li{ width: 100%; }
			li:first-of-type{ border-top: $border-light; }
		}
	}
}


@media screen and (min-width: 1000px){

	.elements-associes-block, .fichiers-associes-block{
		ul.liste_objet{ 		
			// @include flex;
			// @include flex-wrap(wrap);			
			// li{ width: calc( ( 100% - #{$unite*3*2} ) / 2 ); }
			
			@include column-count(2);
			@include column-gap($unite*1.5);
			@include column-fill(balance);

			margin-right: $unite*1;	
			li{ break-inside: avoid}

		}		
	}
}


@media screen and (min-width: 1600px) {

	.elements-associes-block, .fichiers-associes-block{

		ul.liste_objet{ 		
			max-width: 1500px;
			// @include flex;
			// @include flex-wrap(wrap);			
			// li{ width: calc( ( 100% - #{$unite*3*3} ) / 3 ); }

			@include column-count(3);
			@include column-gap($unite*3);
			@include column-fill(balance);			
			@include column-rule($border-very-light);
			li{ break-inside: avoid}
		}		
	}
}

